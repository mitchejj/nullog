<!DOCTYPE html>
<html lang=en-US>
  <meta content="width=device-width,initial-scale=1" name=viewport>
  <meta content="text/html; charset=utf-8" http-equiv=Content-Type>
  <meta content=nullog property=og:site_name>
  <meta content=2016-04-29T21:24:10.000Z property=og:updated_time>
  <meta content=en_US property=og:locale>
  <meta content=article property=og:type>
  <meta content="quick and dirty metrics" property=og:title>
  <meta content="actually its about mcache" property=og:description>
  <meta content=https://nullog.net/2012/7/26/quick-and-dirty-metrics/ property=og:url>
  <meta content="Jason Mitchell" property=article:author>
  <meta content=meta property=article:tag>
  <meta content=2012-08-26T00:00:00.000Z property=article:published_time>
  <meta content=2016-04-29T21:24:10.000Z property=article:modified_time>
  <meta content=summary name=twitter:card>
  <meta content=@_nullog name=twitter:site>
  <meta content=@mitchejj name=twitter:creator>
  <meta content="quick and dirty metrics" name=twitter:title>
  <meta content="actually its about mcache" name=twitter:description>
  <link href=//humans.txt rel=author type=text/plain>
  <title>quick and dirty metrics | nullog</title>
  <link href=https://nullog.net/2012/7/26/quick-and-dirty-metrics/ rel=canonical>
  <link href=/nullog.css rel=stylesheet>
  <body class=nullog>
    <header class="center site-header">
      <h1 class="center lowercase site-title">
        <a href=/>nullog</a>
      </h1>
      <nav class="lowercase site-nav">
        <ul>
          <li class=nav-node>
            <h2 class=small>
              <a href=/about/>about</a>
            </h2>
            <li class=nav-node>
              <h2 class=small>
                <a href=/all/>explore</a>
              </h2>
              <li class=nav-node>
                <h2 class=small>
                  <a href=/io/>io</a>
                </h2>
        </ul>
      </nav>
    </header>
    <main class=nullog-body>
      <article class="post meta">
        <header class=title>
          <h2 class=lowercase>quick and dirty metrics
            <span class=mute> actually its about mcache</span>
          </h2>
        </header>
        <p>Now that I have github -&gt; heroku publishing in place now is the time to setup even more over kill, heroku offers a few (2)5 MB Memcache Bucket.
          <p>I made the following changes to <code>config.ru</code><pre><code class=lang-ruby>if memcache_servers = ENV[&quot;MEMCACHE_SERVERS&quot;]
    require &#39;dalli&#39;
    require &#39;rack-cache&#39;
    require &#39;memcachier&#39;
    $cache = Dalli::Client.new
    use Rack::Cache,
        :verbose =&gt; true,
        :metastore =&gt; $cache,
        :entitystore =&gt; $cache
end
</code></pre>
            <p>To test that caching is working use <code>ab</code> aka Apache HTTP server benchmarking tool and run <code>ab -n 500 -c 5 [hostname]</code>
              <p>This will make 500 requst to [hostname] with 5 concurrent request.
                <p>And to see if <code>Rack::Deflater</code> is working<pre><code>curl -I -H &quot;Accept-Encoding: gzip,deflate&quot; [hostname]
</code></pre></article>
    </main>
    <footer>
      <div class="small center">
        <p>So this is it. I mean, it&#x27;s not much, but it&#x27;s, you know...
          <br>
          <em>Copyright &copy; 2012 &mdash; 2017;
            <a href=http://twitter.com/mitchejj title=@mitchejj>Jason Mitchell</a>
          </em>
      </div>
    </footer>